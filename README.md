<div dir="rtl" lang="he">

# מטלה מספר 3 - קו - מחלקות וירושה - הגשה ביחידים

קו (coup - הפיכה) הוא משחק קופסה עבור 2-6 שחקנים המשחקים אחד נגד השני כדי להישאר אחרונים על המגרש.

במטלה זו נממש חלק מחוקי המשחק.

## חוקי המשחק
בתחילת המשחק כל שחקן שולף קלף מהערימה. כל קלף מתאר  תפקיד אותו יכול לממש השחקן.  במרכז השולחן ישנה קופה של מטבעות. כל שחקן בתורו משחק לפי התפקיד אליו משתייך (פירוט התפקידים בהמשך) ויכול לקחת מטבעות בהתאם. מטרת המשחק היא להוציא לפועל "הפיכות" ולהדיח שחקנים אחרים מתפקידם. השחקן האחרון שנשאר בעל תפקיד מנצח.
 
## השחקן

לכל שחקן יש שם משלו. 

בכל תור יכול שחקן, בלי קשר לתפקידו, לבצע את אחת מהפעולות הבאות:

- איסוף משאבים (gather) - השחקן מקבל מטבע אחד מהקופה. לפעולה זו אין עלות והיא אינה ניתנת לחסימה.

- מס (tax) - השחקן מקבל שני מטבעות מהקופה. פעולה זו אינה עולה דבר, אך תפקידים מסוימים יכולים לחסום אותה.

- שוחד (bribe) - השחקן משלם 4 מטבעות כדי לבצע פעולה נוספת בתורו. פעולה זו אינה ניתנת לחסימה.

- מעצר (arrest) - השחקן בוחר שחקן אחר ולוקח ממנו מטבע אחד. פעולה זו אינה ניתנת לחסימה, אך לא ניתן להשתמש בה על אותו שחקן פעמיים ברציפות.

- חרם (sanction) - השחקן בוחר שחקן אחר ומונע ממנו להשתמש בפעולות כלכליות (gather, tax) עד לתורו הבא. עלות פעולה זו היא 3 מטבעות.

- הפיכה (coup) - השחקן בוחר שחקן אחר ומדיח אותו לחלוטין מהמשחק. עלות פעולה זו היא 7 מטבעות, והיא אינה ניתנת לחסימה.

כל פעולה צריכה לעדכן את מספר המטבעות אותם מחזיק השחקן בהתאם.  
אם הפעולה לא חוקית, יש לזרוק חריגה מתאימה.

בנוסף, יש לממש את השיטות הבאות:

*  הפונקציה `role` - מחזירה את התפקיד של השחקן (ראו רשימת התפקידים למטה), לצורך תצוגה.

* הפונקציה `coins`  מחזירה כמה מטבעות יש לשחקן.


### תפקידים

למשחק יש מספר תפקידים, ולכל אחד מהם יכולות ייחודיות:

- נציב (Governor) - רשאי לקחת 3 מטבעות מהקופה במקום 2 כשהוא משתמש בפעולת מס (tax). בנוסף, הוא יכול לחסום פעולה של מס (tax) של שחקנים אחרים.

- מרגל (Spy) - יכול לראות את כמות המטבעות של שחקן אחר ולמנוע ממנו להשתמש בפעולת מעצר (arrest) בתורו הבא. פעולה זו אינה עולה מטבעות ואינה נחשבת לתור.

- ברון (Baron) - יכול "להשקיע" 3 מטבעות ולקבל בתמורה 5 מטבעות. בנוסף, אם הוא מותקף באמצעות חרם (sanction), הוא מקבל מטבע אחד כפיצוי.

- גנרל (General) - יכול לשלם 5 מטבעות כדי למנוע הפיכה (coup) נגד שחקן אחר. בנוסף, אם הוא נפגע באמצעות מעצר (arrest), הוא מחזיר את המטבע שנלקח ממנו.

- שופט (Judge) - יכול לבטל פעולת שוחד (bribe) של שחקן אחר, מה שגורם לו להפסיד את 4 המטבעות ששילם. בנוסף, אם הוא מותקף באמצעות חרם (sanction), השחקן שהטיל עליו את החרם צריך לשלם מטבע נוסף לקופה.

- סוחר (Merchant) - אם הוא מתחיל תור עם 3 מטבעות לפחות, הוא יכול לקחת מטבע נוסף בחינם. בנוסף, אם הוא מותקף באמצעות מעצר (arrest), הוא משלם שני מטבעות לקופה במקום לאבד אחד לשחקן אחר.


הערות:

* יכולים להיות שני שחקנים או יותר בעלי אותו תפקיד - לא קורה שום דבר מיוחד במצב זה.

* אם שחקן מחזיק 10 מטבעות בתחילת תורו, הוא חייב לבצע הפיכה באותו תור

* פעולות חסימה לא צריכות להמתין לתור השחקן החוסם ולא מבזבזות לו תור אלא מתבצעות "בזמן אמת". במשחק שלנו לא נממש תגובות "בזמן אמת" לכן ממשו את הפתרון הבא:  
שחקן שביצע פעולה שניתנת לחסימה, ניתן לחסום את הפעולה שלו עד שהגיע תורו לשחק שוב. למשל, אם שחקן השתמש בפעולה "שוחד", אז שופט יכול לחסום את הפעולה למרות שזה לא התור שלו.

## מהלך המשחק

לכל משחק יש את השחקנים שמשחקים בו, מה מצבו של כל שחקן ובסיום המשחק, מי המנצח. בנוסף, המשחק יודע תור מי עכשיו. התורות נקבעים לפי סדר ההצטרפות למשחק.

יש לממש את השיטות

1. תור - `turn` - הדפסת שם השחקן אשר תורו לשחק כעת.
2. שחקנים פעילים - `players` - השיטה מחזירה את שמות השחקנים שפעילים כעת במשחק.
3. מנצח - `winner` - השיטה מחזירה את שם המנצח. אם המשחק עדיין פעיל, השיטה תזרוק שגיאה.

יש לבדוק את תקינות הקלט ולזרוק שגיאות במידת הצורך. בנוסף עליכם לכתוב טסטים לכל הפונקציות שכתבתם.

מצורף קובץ בשם ``Demo.cpp`` המדגים את הקוד.

יש לכתוב קובץ main שבו אתם מדגימים את הקוד שכתבתם. בנוסף, עליכם ליצור קובץ ``Makefile`` כאשר הפקודה ``make Main`` 
תריץ את הקובץ לדוגמה שכתבתם והפקודה ``make test`` תריץ את הטסטים שלכם.

כמו כן, עליכם לכתוב בתחילת **כל** קובץ את המייל שלכם. עליכם להגיש קובץ ``README`` המסביר את ההיררכיה של המחלקות ובאילו ספריות השתמשתם. כמו כן, עליכם לכתוב בתחילת כל קובץ את המייל שלכם.

כדי להגיש את המטלה במודל עליכם להגיש קובץ טקסט המורכב מ-3 שורות: בשורה הראשונה מספר תעודת הזהות שלכם, בשורה השנייה הקישור להגשה שלכם ובשורה השלישית הקומיט האחרון של הפרויקט.

מותר להתייעץ עם סטודנטים אחרים או לחפש מידע באינטרנט; אסור להעתיק קטעי-קוד שלמים מסטודנטים אחרים, מהאינטרנט וממודלי בינה מלאכותית (למשל, chatGPT).
יש לדווח על כל עזרה שקיבלתם, מסטודנטים אחרים או מהאינטרנט, בהתאם ל[תקנון היושר של המחלקה](https://www.ariel.ac.il/wp/cs/wp-content/uploads/sites/88/2020/08/Guidelines-for-Academic-Integrity.pdf).

בהצלחה!



  
</div>
